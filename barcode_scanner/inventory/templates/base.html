<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#6366f1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  {% load static %}

  <!-- Google Fonts - Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

  <!-- Modern CSS -->
  <link rel="stylesheet" href="{% static 'css/modern.css' %}">

  <!-- ZXing Barcode Library -->
  <script src="https://unpkg.com/@zxing/library@0.18.6/umd/index.min.js"></script>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  {% block header %}{% endblock header %}

  <title>{% block title %}Asset Management{% endblock title %}</title>
</head>
<body>
  <!-- Toast Notifications Container -->
  <div class="toast-container" id="toastContainer">
    {% include "notifications.html" %}
  </div>

  <div class="app-container">
    <!-- Mobile Header -->
    <header class="mobile-header">
      <button class="icon-btn" id="menuToggle" aria-label="Menu">
        <i class="bi bi-list" style="font-size: 1.5rem;"></i>
      </button>

      <span class="mobile-logo">AssetHub</span>

      <div class="mobile-actions">
        <a href="/admin/" class="icon-btn" aria-label="Admin">
          <i class="bi bi-gear"></i>
        </a>
        <a href="{% url 'logout' %}" class="icon-btn" aria-label="Logout">
          <i class="bi bi-box-arrow-right"></i>
        </a>
      </div>
    </header>

    <!-- Mobile Slide-out Menu Overlay -->
    <div class="mobile-menu-overlay" id="mobileMenuOverlay">
      <aside class="mobile-menu">
        <div class="mobile-menu-header">
          <span class="mobile-logo">AssetHub</span>
          <button class="icon-btn" id="menuClose">
            <i class="bi bi-x-lg"></i>
          </button>
        </div>

        <nav class="mobile-menu-nav">
          <div class="nav-section">
            <div class="nav-section-title">Main Menu</div>
            <a href="{% url 'home' %}" class="nav-item">
              <i class="bi bi-house"></i>
              <span>Dashboard</span>
            </a>
          </div>

          <div class="nav-section">
            <div class="nav-section-title">Scanners</div>
            <a href="{% url 'index' %}" class="nav-item">
              <i class="bi bi-upc-scan"></i>
              <span>Scan Computer</span>
            </a>
            <a href="{% url 'scan_monitor' %}" class="nav-item">
              <i class="bi bi-display"></i>
              <span>Scan Monitor</span>
            </a>
            <a href="{% url 'scan_dockingstation' %}" class="nav-item">
              <i class="bi bi-hdd-network"></i>
              <span>Scan Docking Station</span>
            </a>
            <a href="{% url 'add_printer' %}" class="nav-item">
              <i class="bi bi-printer"></i>
              <span>Add Printer</span>
            </a>
          </div>

          <div class="nav-section">
            <div class="nav-section-title">Asset Lists</div>
            <a href="{% url 'computer_list' %}" class="nav-item">
              <i class="bi bi-laptop"></i>
              <span>Computers</span>
            </a>
            <a href="{% url 'printers_list' %}" class="nav-item">
              <i class="bi bi-printer"></i>
              <span>Printers</span>
            </a>
            <a href="{% url 'monitors_list' %}" class="nav-item">
              <i class="bi bi-display"></i>
              <span>Monitors</span>
            </a>
            <a href="{% url 'dockingstation_list' %}" class="nav-item">
              <i class="bi bi-hdd-network"></i>
              <span>Docking Stations</span>
            </a>
          </div>

          <div class="nav-section">
            <div class="nav-section-title">Account</div>
            <a href="/admin/" class="nav-item">
              <i class="bi bi-gear"></i>
              <span>Admin Panel</span>
            </a>
            <a href="{% url 'logout' %}" class="nav-item">
              <i class="bi bi-box-arrow-right"></i>
              <span>Logout</span>
            </a>
          </div>
        </nav>
      </aside>
    </div>

    <!-- Desktop Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-logo">
        <h1>AssetHub</h1>
        <p style="font-size: 0.75rem; color: var(--gray-500); margin-top: 4px;">Asset Management System</p>
      </div>

      <nav class="sidebar-nav">
        <div class="nav-section">
          <div class="nav-section-title">Main</div>
          <a href="{% url 'home' %}" class="nav-item" id="nav-home">
            <i class="bi bi-grid-1x2"></i>
            <span>Dashboard</span>
          </a>
        </div>

        <div class="nav-section">
          <div class="nav-section-title">Scanners</div>
          <a href="{% url 'index' %}" class="nav-item" id="nav-scan-computer">
            <i class="bi bi-upc-scan"></i>
            <span>Scan Computer</span>
            <span class="badge">Quick</span>
          </a>
          <a href="{% url 'scan_monitor' %}" class="nav-item" id="nav-scan-monitor">
            <i class="bi bi-display"></i>
            <span>Scan Monitor</span>
          </a>
          <a href="{% url 'scan_dockingstation' %}" class="nav-item" id="nav-scan-dock">
            <i class="bi bi-hdd-network"></i>
            <span>Scan Docking Station</span>
          </a>
          <a href="{% url 'add_printer' %}" class="nav-item" id="nav-add-printer">
            <i class="bi bi-printer"></i>
            <span>Add Printer</span>
          </a>
        </div>

        <div class="nav-section">
          <div class="nav-section-title">Asset Lists</div>
          <a href="{% url 'computer_list' %}" class="nav-item" id="nav-computers">
            <i class="bi bi-laptop"></i>
            <span>Computers</span>
          </a>
          <a href="{% url 'printers_list' %}" class="nav-item" id="nav-printers">
            <i class="bi bi-printer"></i>
            <span>Printers</span>
          </a>
          <a href="{% url 'monitors_list' %}" class="nav-item" id="nav-monitors">
            <i class="bi bi-display"></i>
            <span>Monitors</span>
          </a>
          <a href="{% url 'dockingstation_list' %}" class="nav-item" id="nav-docks">
            <i class="bi bi-hdd-network"></i>
            <span>Docking Stations</span>
          </a>
        </div>
      </nav>

      <!-- Sidebar Footer -->
      <div style="padding: var(--space-4); border-top: 1px solid var(--gray-200); margin-top: auto;">
        <div style="display: flex; align-items: center; gap: var(--space-3); margin-bottom: var(--space-3);">
          <div style="width: 40px; height: 40px; border-radius: var(--radius-full); background: linear-gradient(135deg, var(--primary), var(--secondary)); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600;">
            <i class="bi bi-person"></i>
          </div>
          <div>
            <div style="font-weight: 600; font-size: 0.875rem;">Admin</div>
            <div style="font-size: 0.75rem; color: var(--gray-500);">Administrator</div>
          </div>
        </div>
        <div style="display: flex; gap: var(--space-2);">
          <a href="/admin/" class="btn btn-secondary btn-sm" style="flex: 1;">
            <i class="bi bi-gear"></i>
            Settings
          </a>
          <a href="{% url 'logout' %}" class="btn btn-outline btn-sm" style="flex: 1;">
            <i class="bi bi-box-arrow-right"></i>
            Logout
          </a>
        </div>
      </div>
    </aside>

    <!-- Main Content Area -->
    <main class="main-content">
      {% block content %}
      {% endblock content %}
    </main>

    <!-- Mobile Bottom Navigation -->
    <nav class="bottom-nav">
      <a href="{% url 'home' %}" class="bottom-nav-item" id="bnav-home">
        <i class="bi bi-house"></i>
        <span>Home</span>
      </a>
      <a href="{% url 'index' %}" class="bottom-nav-item" id="bnav-scan">
        <i class="bi bi-upc-scan"></i>
        <span>Scan</span>
      </a>
      <a href="{% url 'computer_list' %}" class="bottom-nav-item" id="bnav-assets">
        <i class="bi bi-laptop"></i>
        <span>Assets</span>
      </a>
      <a href="#" class="bottom-nav-item" id="addAssetBtn">
        <i class="bi bi-plus-circle"></i>
        <span>Add</span>
      </a>
      <a href="#" class="bottom-nav-item" id="moreBtn">
        <i class="bi bi-three-dots"></i>
        <span>More</span>
      </a>
    </nav>
  </div>

  <!-- Add Asset Modal (Mobile) -->
  <div id="addAssetModal" style="display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 200; align-items: flex-end; justify-content: center;">
    <div style="background: var(--bg-primary); width: 100%; max-width: 500px; border-radius: var(--radius-xl) var(--radius-xl) 0 0; padding: var(--space-6); animation: slideUp 0.3s ease;">
      <div style="width: 40px; height: 4px; background: var(--gray-300); border-radius: var(--radius-full); margin: 0 auto var(--space-6);"></div>
      <h3 style="margin-bottom: var(--space-4);">Add New Asset</h3>
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-3);">
        <a href="{% url 'index' %}" class="btn btn-secondary" style="flex-direction: column; padding: var(--space-4);">
          <i class="bi bi-laptop" style="font-size: 1.5rem; margin-bottom: var(--space-2);"></i>
          Computer
        </a>
        <a href="{% url 'scan_monitor' %}" class="btn btn-secondary" style="flex-direction: column; padding: var(--space-4);">
          <i class="bi bi-display" style="font-size: 1.5rem; margin-bottom: var(--space-2);"></i>
          Monitor
        </a>
        <a href="{% url 'scan_dockingstation' %}" class="btn btn-secondary" style="flex-direction: column; padding: var(--space-4);">
          <i class="bi bi-hdd-network" style="font-size: 1.5rem; margin-bottom: var(--space-2);"></i>
          Docking Station
        </a>
        <a href="{% url 'add_printer' %}" class="btn btn-secondary" style="flex-direction: column; padding: var(--space-4);">
          <i class="bi bi-printer" style="font-size: 1.5rem; margin-bottom: var(--space-2);"></i>
          Printer
        </a>
      </div>
      <button class="btn btn-outline w-full mt-4" id="closeAddModal">Cancel</button>
    </div>
  </div>

  <!-- More Options Modal (Mobile) -->
  <div id="moreModal" style="display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 200; align-items: flex-end; justify-content: center;">
    <div style="background: var(--bg-primary); width: 100%; max-width: 500px; border-radius: var(--radius-xl) var(--radius-xl) 0 0; padding: var(--space-6); animation: slideUp 0.3s ease;">
      <div style="width: 40px; height: 4px; background: var(--gray-300); border-radius: var(--radius-full); margin: 0 auto var(--space-6);"></div>
      <h3 style="margin-bottom: var(--space-4);">More Options</h3>
      <div style="display: flex; flex-direction: column; gap: var(--space-2);">
        <a href="{% url 'printers_list' %}" class="nav-item">
          <i class="bi bi-printer"></i>
          <span>Printers List</span>
        </a>
        <a href="{% url 'monitors_list' %}" class="nav-item">
          <i class="bi bi-display"></i>
          <span>Monitors List</span>
        </a>
        <a href="{% url 'dockingstation_list' %}" class="nav-item">
          <i class="bi bi-hdd-network"></i>
          <span>Docking Stations List</span>
        </a>
        <hr style="border: none; border-top: 1px solid var(--gray-200); margin: var(--space-2) 0;">
        <a href="/admin/" class="nav-item">
          <i class="bi bi-gear"></i>
          <span>Admin Panel</span>
        </a>
        <a href="{% url 'logout' %}" class="nav-item">
          <i class="bi bi-box-arrow-right"></i>
          <span>Logout</span>
        </a>
      </div>
      <button class="btn btn-outline w-full mt-4" id="closeMoreModal">Cancel</button>
    </div>
  </div>

  <script>
    // Mobile Menu Toggle
    const menuToggle = document.getElementById('menuToggle');
    const menuClose = document.getElementById('menuClose');
    const mobileMenuOverlay = document.getElementById('mobileMenuOverlay');

    function openMenu() {
      mobileMenuOverlay.classList.add('open');
      document.body.style.overflow = 'hidden';
    }

    function closeMenu() {
      mobileMenuOverlay.classList.remove('open');
      document.body.style.overflow = '';
    }

    menuToggle.addEventListener('click', openMenu);
    menuClose.addEventListener('click', closeMenu);
    mobileMenuOverlay.addEventListener('click', (e) => {
      if (e.target === mobileMenuOverlay) closeMenu();
    });

    // Add Asset Modal
    const addAssetBtn = document.getElementById('addAssetBtn');
    const addAssetModal = document.getElementById('addAssetModal');
    const closeAddModal = document.getElementById('closeAddModal');

    addAssetBtn.addEventListener('click', (e) => {
      e.preventDefault();
      addAssetModal.style.display = 'flex';
      document.body.style.overflow = 'hidden';
    });

    closeAddModal.addEventListener('click', () => {
      addAssetModal.style.display = 'none';
      document.body.style.overflow = '';
    });

    addAssetModal.addEventListener('click', (e) => {
      if (e.target === addAssetModal) {
        addAssetModal.style.display = 'none';
        document.body.style.overflow = '';
      }
    });

    // More Options Modal
    const moreBtn = document.getElementById('moreBtn');
    const moreModal = document.getElementById('moreModal');
    const closeMoreModal = document.getElementById('closeMoreModal');

    moreBtn.addEventListener('click', (e) => {
      e.preventDefault();
      moreModal.style.display = 'flex';
      document.body.style.overflow = 'hidden';
    });

    closeMoreModal.addEventListener('click', () => {
      moreModal.style.display = 'none';
      document.body.style.overflow = '';
    });

    moreModal.addEventListener('click', (e) => {
      if (e.target === moreModal) {
        moreModal.style.display = 'none';
        document.body.style.overflow = '';
      }
    });

    // Highlight Active Navigation Item
    const currentPath = window.location.pathname;
    document.querySelectorAll('.nav-item, .bottom-nav-item').forEach(item => {
      if (item.getAttribute('href') === currentPath) {
        item.classList.add('active');
      }
    });

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeMenu();
        addAssetModal.style.display = 'none';
        moreModal.style.display = 'none';
        document.body.style.overflow = '';
      }
    });
  </script>
</body>
</html>
